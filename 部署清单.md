# é¥æ„Ÿå¤§æ¥¼MCPæœåŠ¡å™¨éƒ¨ç½²æ¸…å•

## ğŸ¯ éƒ¨ç½²ç›®æ ‡

å°†å±±ä¸œè€•åœ°æµå‡ºåˆ†æMCPæœåŠ¡å™¨æˆåŠŸéƒ¨ç½²åˆ°é¥æ„Ÿå¤§æ¥¼ç¯å¢ƒï¼ˆ10.101.240.x ç½‘æ®µï¼‰

## ğŸ“¦ å¿…éœ€æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶ (å¿…é¡»ä¸Šä¼ )

1. **shandong_mcp_server_enhanced-æ•´ä½“æµç¨‹-æç¤ºè¯å®Œå–„ç‰ˆ.py** *(73KB)*
   - ä¸»æœåŠ¡å™¨æ–‡ä»¶ï¼ˆå·²å®Œæˆé¥æ„Ÿå¤§æ¥¼é€‚é…ï¼‰
   - åŒ…å«æ‰€æœ‰MCPå·¥å…·å’ŒAPI
   - âœ… å·²é€‚é…æ–°ç¯å¢ƒé…ç½®

2. **yaogan-mcp-server-run.sh** *(6.5KB)*
   - æœåŠ¡ç®¡ç†è„šæœ¬
   - æ”¯æŒå¯åŠ¨/åœæ­¢/é‡å¯/çŠ¶æ€æŸ¥è¯¢/ç¯å¢ƒæ£€æŸ¥
   - âœ… åŒ…å«é¥æ„Ÿå¤§æ¥¼ç¯å¢ƒæ£€æŸ¥

3. **quick-deploy.sh** *(9.7KB)*
   - ä¸€é”®è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬
   - æ¨èä½¿ç”¨æ­¤è„šæœ¬è¿›è¡Œéƒ¨ç½²
   - âœ… åŒ…å«å®Œæ•´çš„éƒ¨ç½²æµç¨‹

### é…ç½®æ–‡ä»¶ (å»ºè®®ä¸Šä¼ )

4. **yaogan_environment_config.py** *(2.4KB)*
   - ç¯å¢ƒé…ç½®æ–‡ä»¶
   - é›†ä¸­ç®¡ç†æ‰€æœ‰æœåŠ¡åœ°å€
   - âœ… ä¾¿äºåç»­é…ç½®ä¿®æ”¹

### æ–‡æ¡£æ–‡ä»¶ (å‚è€ƒä½¿ç”¨)

5. **é¥æ„Ÿå¤§æ¥¼-MCPæœåŠ¡å™¨éƒ¨ç½²æŒ‡å—.md** *(6.7KB)*
   - è¯¦ç»†éƒ¨ç½²æŒ‡å—
   - æ•…éšœæ’é™¤å’Œç»´æŠ¤è¯´æ˜
   - ğŸ“– å»ºè®®ä¿ç•™ä»¥å¤‡å‚è€ƒ

6. **é¡¹ç›®é€‚é…æ€»ç»“.md** *(6.7KB)*
   - é€‚é…è¿‡ç¨‹å’ŒæŠ€æœ¯è¯´æ˜
   - ğŸ“– æŠ€æœ¯æ–‡æ¡£ï¼Œå¯é€‰ä¸Šä¼ 

7. **éƒ¨ç½²æ¸…å•.md** *(æœ¬æ–‡ä»¶)*
   - éƒ¨ç½²æ–‡ä»¶æ¸…å•
   - ğŸ“‹ æ“ä½œæŒ‡å—

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä¸€é”®éƒ¨ç½² (æ¨è)

```bash
# 1. ä¸Šä¼ å¿…éœ€æ–‡ä»¶åˆ°æœåŠ¡å™¨
scp shandong_mcp_server_enhanced-æ•´ä½“æµç¨‹-æç¤ºè¯å®Œå–„ç‰ˆ.py root@target-server:/tmp/
scp yaogan-mcp-server-run.sh root@target-server:/tmp/
scp quick-deploy.sh root@target-server:/tmp/
scp yaogan_environment_config.py root@target-server:/tmp/

# 2. ç™»å½•æœåŠ¡å™¨å¹¶æ‰§è¡Œéƒ¨ç½²
ssh root@target-server
cd /tmp
chmod +x quick-deploy.sh
sudo ./quick-deploy.sh
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

```bash
# 1. åˆ›å»ºéƒ¨ç½²ç›®å½•
sudo mkdir -p /opt/yaogan-mcp

# 2. ä¸Šä¼ å’Œè®¾ç½®æ–‡ä»¶
sudo cp shandong_mcp_server_enhanced-æ•´ä½“æµç¨‹-æç¤ºè¯å®Œå–„ç‰ˆ.py /opt/yaogan-mcp/
sudo cp yaogan-mcp-server-run.sh /opt/yaogan-mcp/
sudo cp yaogan_environment_config.py /opt/yaogan-mcp/
sudo chmod +x /opt/yaogan-mcp/yaogan-mcp-server-run.sh

# 3. å®‰è£…ç¯å¢ƒå’Œå¯åŠ¨
cd /opt/yaogan-mcp
./yaogan-mcp-server-run.sh install
./yaogan-mcp-server-run.sh start
```

## âœ… éƒ¨ç½²éªŒè¯æ¸…å•

### ç¯å¢ƒæ£€æŸ¥
- [ ] ç½‘ç»œè¿é€šæ€§æ£€æŸ¥ï¼š`./yaogan-mcp-server-run.sh check`
- [ ] å‰ç«¯æœåŠ¡ (10.101.240.20) å¯è®¿é—®
- [ ] è®¡ç®—é›†ç¾¤ (10.101.240.10) å¯è®¿é—®
- [ ] MinIOå­˜å‚¨ (10.101.240.23:9007) å¯è®¿é—®

### æœåŠ¡éªŒè¯
- [ ] MCPæœåŠ¡å¯åŠ¨æˆåŠŸï¼š`./yaogan-mcp-server-run.sh status`
- [ ] å¥åº·æ£€æŸ¥é€šè¿‡ï¼š`curl http://localhost:8000/health`
- [ ] æœåŠ¡ä¿¡æ¯æ­£ç¡®ï¼š`curl http://localhost:8000/info`

### åŠŸèƒ½æµ‹è¯•
- [ ] ç¯å¢ƒæ£€æŸ¥å·¥å…·å¯ç”¨ï¼šæµ‹è¯• `check_yaogan_environment`
- [ ] è®¤è¯åŠŸèƒ½æ­£å¸¸ï¼šæµ‹è¯• `refresh_token`
- [ ] æ ¸å¿ƒåˆ†æå·¥å…·å¯ç”¨ï¼šæµ‹è¯• `farmland_outflow`

## ğŸ”§ é…ç½®è¦ç‚¹

### ç½‘ç»œé…ç½®
```
å‰ç«¯ï¼šhttp://10.101.240.20
è®¡ç®—é›†ç¾¤ï¼šhttp://10.101.240.10
MinIOï¼šhttp://10.101.240.23:9007
```

### è®¤è¯é…ç½®
```
ç”¨æˆ·åï¼šoge_admin
å®¢æˆ·ç«¯IDï¼šoge_client
```

### éƒ¨ç½²ç›®å½•
```
é»˜è®¤ç›®å½•ï¼š/opt/yaogan-mcp
æ—¥å¿—ç›®å½•ï¼š/opt/yaogan-mcp/logs
Condaç¯å¢ƒï¼šmcpserver
```

## ğŸš¨ é‡è¦æ³¨æ„äº‹é¡¹

### æƒé™è¦æ±‚
- éœ€è¦rootæƒé™æ‰§è¡Œéƒ¨ç½²è„šæœ¬
- ç¡®ä¿å¯ä»¥è®¿é—®é¥æ„Ÿå¤§æ¥¼å†…ç½‘

### ç¯å¢ƒä¾èµ–
- Python 3.9+
- Condaç¯å¢ƒç®¡ç†å™¨
- ç½‘ç»œè®¿é—®åˆ°10.101.240.xç½‘æ®µ

### å®‰å…¨è€ƒè™‘
- ä»…åœ¨å†…ç½‘ç¯å¢ƒä½¿ç”¨
- å®šæœŸæ›´æ–°è®¤è¯Token
- ç›‘æ§æœåŠ¡è¿è¡ŒçŠ¶æ€

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¸¸è§é—®é¢˜
1. **éƒ¨ç½²å¤±è´¥**ï¼šæ£€æŸ¥ç½‘ç»œè¿é€šæ€§å’Œæƒé™
2. **æœåŠ¡å¯åŠ¨å¤±è´¥**ï¼šæŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
3. **è®¤è¯å¤±è´¥**ï¼šä½¿ç”¨refresh_tokenå·¥å…·

### æ—¥å¿—æ–‡ä»¶ä½ç½®
```
æœåŠ¡æ—¥å¿—ï¼š/opt/yaogan-mcp/logs/yaogan_server_8000.log
MCPæ—¥å¿—ï¼š/opt/yaogan-mcp/logs/yaogan_mcp.log
APIæ—¥å¿—ï¼š/opt/yaogan-mcp/logs/api_calls.log
```

### ç®¡ç†å‘½ä»¤
```bash
# å¯åŠ¨æœåŠ¡
./yaogan-mcp-server-run.sh start

# æ£€æŸ¥çŠ¶æ€
./yaogan-mcp-server-run.sh status

# ç¯å¢ƒæ£€æŸ¥
./yaogan-mcp-server-run.sh check

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/yaogan_server_8000.log
```

---

## ğŸ‰ éƒ¨ç½²æˆåŠŸæ ‡å¿—

å½“çœ‹åˆ°ä»¥ä¸‹å†…å®¹æ—¶ï¼Œè¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼š

1. **æœåŠ¡å¯åŠ¨æ¶ˆæ¯**ï¼š
   ```
   é¥æ„Ÿå¤§æ¥¼MCPæœåŠ¡å¯åŠ¨æˆåŠŸ!
   - ç«¯å£: 8000
   - å¥åº·æ£€æŸ¥: http://localhost:8000/health
   ```

2. **å¥åº·æ£€æŸ¥å“åº”**ï¼š
   ```json
   {
     "status": "healthy",
     "server": "yaogan-building-cultivated-analysis",
     "environment": "é¥æ„Ÿå¤§æ¥¼"
   }
   ```

3. **æ‰€æœ‰ç¯å¢ƒæ£€æŸ¥é€šè¿‡**ï¼š7ä¸ªæœåŠ¡ç»„ä»¶çŠ¶æ€ä¸º"å¯è®¿é—®"

**ğŸ¯ éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªå®Œå…¨é€‚é…é¥æ„Ÿå¤§æ¥¼ç¯å¢ƒçš„MCPæœåŠ¡å™¨ï¼** 