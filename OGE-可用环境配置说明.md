# OGE WebGIS - 可用环境配置说明

## 📋 环境情况说明

根据最新确认的信息：

- ❌ **遥感大楼内网**：没有可用的OGE环境，由吴斌文统一管理
- ✅ **外网穿透服务器**：志威哥提供的可用环境
- ✅ **山东环境**：已验证可用（作为技术参考）

## 🌐 当前可用服务器信息

### 外网穿透服务器
- **外网地址**: `http://111.37.195.111:7002`
- **内网网关端口**: `16555`  
- **状态**: 可用，有后端环境
- **算子镜像**: 待确认

### 功能支持
- ✅ HTTP请求接口
- ✅ 基础算子服务（坡度计算、NDVI计算等）
- ✅ MCP工具调用
- 🔄 具体算子镜像待确认

## 🚀 快速启动

### 方法1：使用专用启动脚本（推荐）
```bash
# 双击运行
start-with-available-oge.cmd
```

### 方法2：手动启动
```bash
# 1. 启动MCP服务器
python shandong_mcp_server.py --mode http --host 0.0.0.0 --port 8000

# 2. 启动前端（新窗口）
cd oge-webgis-frontend
npm run dev
```

## 🔧 配置更新说明

### MCP服务器配置
```python
# 更新为可用的外网穿透地址
OGE_EXTERNAL_URL = "http://111.37.195.111:7002"
OGE_BACKEND_URL = OGE_EXTERNAL_URL
```

### 前端代理配置
```javascript
// vite.config.js
proxy: {
  '/api/oge': {
    target: 'http://111.37.195.111:7002',  // 外网穿透地址
    changeOrigin: true
  }
}
```

## 🧪 功能测试

### 1. 环境检查
在AI助手中输入：
```
检查一下系统状态
```

应该返回：
- ✅ MCP服务器状态
- 🔄 OGE服务器连接状态（待确认）

### 2. 基础算子测试
```
帮我做一个坡度分析
```

### 3. NDVI计算测试
```
计算北京地区的NDVI
```

## 🔍 故障排除

### 连接失败
1. **检查网络连接**
   ```bash
   curl http://111.37.195.111:7002/health
   ```

2. **检查MCP服务器**
   ```bash
   curl http://localhost:8000/health
   ```

3. **检查前端服务**
   ```
   访问: http://localhost:3000
   ```

### 常见问题

**Q: 算子调用失败怎么办？**
A: 联系志威哥确认算子镜像是否已部署

**Q: 网络连接超时？**  
A: 检查防火墙设置，确保可以访问外网

**Q: 需要认证怎么办？**
A: 系统会自动尝试获取Token，如失败请联系志威哥

## 📞 联系方式

如遇到问题，请联系：
- **志威哥**：确认服务器状态、算子镜像等
- **吴斌文**：遥感院环境相关问题

## 🔄 后续计划

1. **确认算子镜像**：联系志威哥确认可用的算子列表
2. **测试完整流程**：验证各种分析工具的可用性
3. **优化配置**：根据实际使用情况调优参数
4. **文档完善**：补充具体的算子使用说明

---

**更新时间**: 2024年当前日期  
**状态**: 配置已更新，等待功能验证 